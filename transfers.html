<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Transfers — james sports Official</title>
  <meta name="description" content="Latest football transfers, deals, and rumors." />
  <style>
    :root{--accent:#ff0000;--card:#141414;--bg:#000;--text:#f5f5f5}
    *{box-sizing:border-box}
    body{margin:0;font-family:ui-sans-serif,system-ui,Arial,Roboto;background:linear-gradient(180deg,var(--bg),#120000);color:var(--text)}
    header{background:linear-gradient(90deg,#000,#4a0000);padding:.8rem 1rem;position:sticky;top:0;z-index:20}
    .nav{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}
    .brand{font-weight:900;color:var(--text);text-decoration:none}
    main{max-width:1200px;margin:1.5rem auto;padding:0 1rem}
    .toolbar{display:flex;gap:.6rem;flex-wrap:wrap;justify-content:space-between;align-items:center;margin-bottom:.8rem}
    .toolbar .left{display:flex;gap:.5rem;flex-wrap:wrap}
    input,select,button{padding:.5rem .7rem;border-radius:8px;border:1px solid #333;background:#0f0f0f;color:var(--text)}
    .btn{background:var(--accent);border:none;color:white;font-weight:800;border-radius:8px;cursor:pointer}
    .btn:hover{opacity:.9}
    .tablewrap{overflow:auto;border-radius:10px;border:1px solid #222}
    table{width:100%;border-collapse:collapse;min-width:1100px}
    th,td{padding:.6rem;border-bottom:1px solid #222;text-align:left;white-space:nowrap}
    th{position:sticky;top:0;background:#101010;color:#ff6666}
    tr:hover td{background:rgba(255,255,255,.05)}
    .fav{cursor:pointer}
    #backToTop{position:fixed;right:20px;bottom:20px;width:44px;height:44px;border-radius:50%;border:none;background:var(--accent);display:none;color:#fff;cursor:pointer}
    .muted{color:#aaa;font-size:.95rem}
  </style>
</head>
<body>
  <header>
    <div class="nav">
      <a class="brand" href="index.html">James Sports Official</a>
      <div>
        <a href="index.html" style="color:#ddd;text-decoration:none;margin-right:1rem">Home</a>
        <a href="transfers.html" style="color:#fc0505;text-decoration:none;margin-right:1rem">Transfers</a>
        <a href="news.html" style="color:#ddd;text-decoration:none;margin-right:1rem">News</a>
        <a href="analysis.html" style="color:#ddd;text-decoration:none;margin-right:1rem">Analysis</a>
        <a href="contact.html" style="color:#ddd;text-decoration:none;margin-right:1rem">Contact</a>
        
      </div>
    </div>
  </header>

  <main>
    <h1 style="text-align:center;color:#ff4444">Transfers</h1>

    <div class="toolbar" role="region">
      <div class="left">
        <input id="q" type="search" placeholder="Search player or club (/ to focus)" />
        <select id="pos"><option value="">All pos</option><option>GK</option><option>DF</option><option>MF</option><option>FW</option></select>
        <select id="status"><option value="">All status</option><option>Official</option><option>Here we go</option><option>Advanced</option><option>Rumour</option></select>
        <select id="sort"><option value="date_asc">Newest</option><option value="date_desc">Oldest</option><option value="fee_asc">Fee high→low</option><option value="fee_desc">Fee low→high</option></select>
        <button id="reset" class="btn">Reset</button>
      </div>
      <div class="right" style="display:flex;gap:.5rem">
        <button id="export" class="btn">Export CSV</button>
        <button id="showFavs" class="btn">Favorites</button>
      </div>
    </div>

    <div class="tablewrap" role="region" aria-label="Transfers table">
      <table id="tbl">
        <thead>
          <tr><th>★</th><th>Player</th><th>From</th><th>To</th><th>Fee (€)</th><th>Contract</th><th>Pos</th><th>Status</th><th>Date</th><th>Notes</th></tr>
        </thead>
        <tbody id="tbody"><tr><td colspan="10" class="muted">Loading…</td></tr></tbody>
      </table>
    </div>

    <div style="display:flex;justify-content:center;gap:.75rem;margin-top:.8rem">
      <button id="prev" class="btn">Prev</button>
      <div id="pageInfo" class="muted" aria-live="polite"></div>
      <button id="next" class="btn">Next</button>
    </div>

    <p style="margin-top:1rem" class="muted">Tip: publish a Google Sheet and set the SHEET_ID in the code. Or edit the local seed JSON.</p>
  </main>

  <button id="backToTop" title="Back to top">↑</button>

  <script>
  // ===== Transfer Data (Local Seed) =====
  let data = [
  {player: "Alexander Isak", from: "Newcastle United", to: "Liverpool", fee: "£125m", contract: "6 years", pos: "FW", status: "Official", date: "2025-08-01", notes: "Record Premier League transfer"},
  {player: "Florian Wirtz", from: "Bayer Leverkusen", to: "Liverpool", fee: "£100m", contract: "5 years", pos: "MF", status: "Official", date: "2025-08-02", notes: "Highly sought-after talent"},
  {player: "Hugo Ekitike", from: "Eintracht Frankfurt", to: "Liverpool", fee: "£69m", contract: "5 years", pos: "FW", status: "Official", date: "2025-08-03", notes: "Promising striker"},
  {player: "Jeremie Frimpong", from: "Bayer Leverkusen", to: "Liverpool", fee: "£29.5m", contract: "4 years", pos: "DF", status: "Official", date: "2025-08-05", notes: ""},
  {player: "Milos Kerkez", from: "Bournemouth", to: "Liverpool", fee: "£40m", contract: "5 years", pos: "DF", status: "Official", date: "2025-08-06", notes: ""},
  {player: "Giovanni Leoni", from: "Parma", to: "Liverpool", fee: "£26m", contract: "4 years", pos: "MF", status: "Official", date: "2025-08-07", notes: ""},
  {player: "Giorgi Mamardashvili", from: "Valencia", to: "Liverpool", fee: "£25m", contract: "5 years", pos: "GK", status: "Official", date: "2025-08-08", notes: ""},
  {player: "Ármin Pécsi", from: "Puskás Akadémia", to: "Liverpool", fee: "£1.5m", contract: "3 years", pos: "MF", status: "Official", date: "2025-08-09", notes: ""},
  {player: "Will Wright", from: "Salford City", to: "Liverpool", fee: "£200k", contract: "3 years", pos: "DF", status: "Official", date: "2025-08-10", notes: ""},

  {player: "Rayan Aït-Nouri", from: "Wolves", to: "Manchester City", fee: "£31.8m", contract: "5 years", pos: "DF", status: "Official", date: "2025-08-02", notes: ""},
  {player: "Rayan Cherki", from: "Lyon", to: "Manchester City", fee: "£34m", contract: "5 years", pos: "MF", status: "Official", date: "2025-08-03", notes: ""},
  {player: "Tijjani Reijnders", from: "Milan", to: "Manchester City", fee: "£46.3m", contract: "5 years", pos: "MF", status: "Official", date: "2025-08-05", notes: ""},
  {player: "Sverre Nypan", from: "Rosenborg", to: "Manchester City", fee: "£12.5m", contract: "4 years", pos: "MF", status: "Official", date: "2025-08-06", notes: ""},
  {player: "James Trafford", from: "Burnley", to: "Manchester City", fee: "£31m", contract: "5 years", pos: "GK", status: "Official", date: "2025-08-07", notes: ""},
  {player: "Gianluigi Donnarumma", from: "PSG", to: "Manchester City", fee: "£26m", contract: "4 years", pos: "GK", status: "Official", date: "2025-08-08", notes: ""},

  {player: "Anthony Elanga", from: "Nottingham Forest", to: "Newcastle United", fee: "£55m", contract: "5 years", pos: "FW", status: "Official", date: "2025-08-03", notes: ""},

  {player: "Benjamin Šeško", from: "RB Leipzig", to: "Manchester United", fee: "£66.2m", contract: "5 years", pos: "FW", status: "Official", date: "2025-08-01", notes: ""},
  {player: "Bryan Mbeumo", from: "Brentford", to: "Manchester United", fee: "£65m", contract: "5 years", pos: "FW", status: "Official", date: "2025-08-02", notes: ""},

  {player: "Viktor Gyökeres", from: "Sporting Lisbon", to: "Arsenal", fee: "£64m", contract: "5 years", pos: "FW", status: "Official", date: "2025-08-03", notes: ""},
  {player: "Eberechi Eze", from: "Crystal Palace", to: "Arsenal", fee: "£67.5m", contract: "5 years", pos: "MF", status: "Official", date: "2025-08-04", notes: ""},
  {player: "Kepa Arrizabalaga", from: "Chelsea", to: "Arsenal", fee: "£5m", contract: "3 years", pos: "GK", status: "Official", date: "2025-08-05", notes: ""},
  {player: "Noni Madueke", from: "Chelsea", to: "Arsenal", fee: "£48.5m", contract: "5 years", pos: "FW", status: "Official", date: "2025-08-06", notes: "plus £3.5m add-ons"},

  {player: "João Pedro", from: "Brighton", to: "Chelsea", fee: "£55m", contract: "5 years", pos: "FW", status: "Official", date: "2025-08-07", notes: ""},

  {player: "Jack Grealish", from: "Manchester City", to: "Everton", fee: "Loan", contract: "1 year", pos: "MF", status: "Official", date: "2025-08-08", notes: ""},

  {player: "Mohammed Kudus", from: "West Ham", to: "Tottenham Hotspur", fee: "£55m", contract: "5 years", pos: "MF", status: "Official", date: "2025-08-09", notes: ""},

  {player: "Rasmus Højlund", from: "Manchester United", to: "Napoli", fee: "Loan with purchase obligation", contract: "1+ years", pos: "FW", status: "Official", date: "2025-08-10", notes: ""}
];

  // ===== State =====
  const perPage = 10;
  let page = 1;
  let showFavs = false;
  const FKEY = 'fno_favs_v2';

  // ===== Elements =====
  const tbody = document.getElementById('tbody');
  const q = document.getElementById('q');
  const pos = document.getElementById('pos');
  const status = document.getElementById('status');
  const sort = document.getElementById('sort');
  const pageInfo = document.getElementById('pageInfo');

  // ===== Utils =====
  const fmt = n => isNaN(n) ? n : (n==0? 'Free': '€'+new Intl.NumberFormat().format(n));
  const loadFavs = ()=> new Set(JSON.parse(localStorage.getItem(FKEY)||'[]'));
  const saveFavs = s=> localStorage.setItem(FKEY, JSON.stringify([...s]));
  const hashRow = r => `${r.player}|${r.from}|${r.to}|${r.date}`;

  // ===== Filtering/Sorting =====
  function getFiltered(){
    const qv = (q.value||'').toLowerCase().trim();
    let arr = data.filter(r=>{
      if(qv){
        const blob = `${r.player} ${r.from} ${r.to} ${r.pos} ${r.status} ${r.notes}`.toLowerCase();
        if(!blob.includes(qv)) return false;
      }
      if(pos.value && r.pos !== pos.value) return false;
      if(status.value && r.status !== status.value) return false;
      return true;
    });

    // sort
    const st = sort.value;
    if(st==='date_desc') arr.sort((a,b)=> (b.date||'').localeCompare(a.date||''));
    else if(st==='date_asc') arr.sort((a,b)=> (a.date||'').localeCompare(b.date||''));
    else if(st==='fee_desc') arr.sort((a,b)=> (Number(b.fee)||0)-(Number(a.fee)||0));
    else if(st==='fee_asc') arr.sort((a,b)=> (Number(a.fee)||0)-(Number(b.fee)||0));
    return arr;
  }

  // ===== Render =====
  function render(){
    let filtered = getFiltered();
    if(showFavs){
      const favs = loadFavs();
      filtered = filtered.filter(r=> favs.has(hashRow(r)));
    }
    const total = filtered.length;
    const pages = Math.max(1, Math.ceil(total/perPage));
    if(page>pages) page = pages;
    const start = (page-1)*perPage; 
    const slice = filtered.slice(start, start+perPage);

    tbody.innerHTML = slice.map(r=>{
      const favs = loadFavs();
      const star = favs.has(hashRow(r)) ? '⭐' : '☆';
      return `<tr>
        <td class="fav" data-key="${hashRow(r)}">${star}</td>
        <td>${r.player}</td>
        <td>${r.from}</td>
        <td>${r.to}</td>
        <td>${fmt(r.fee)}</td>
        <td>${r.contract||''}</td>
        <td>${r.pos||''}</td>
        <td>${r.status||''}</td>
        <td>${r.date||''}</td>
        <td>${r.notes||''}</td>
      </tr>`;
    }).join('');
    if(slice.length===0) tbody.innerHTML = `<tr><td colspan="10" class="muted">No results</td></tr>`;
    pageInfo.textContent = `Page ${page} / ${pages} • ${total} result(s)`;
  }

  // ===== Events =====
  q.addEventListener('input', ()=>{ page=1; render(); });
  pos.addEventListener('change', ()=>{ page=1; render(); });
  status.addEventListener('change', ()=>{ page=1; render(); });
  sort.addEventListener('change', ()=>{ page=1; render(); });
  document.getElementById('reset').addEventListener('click', ()=>{ q.value=''; pos.value=''; status.value=''; sort.value='date_desc'; page=1; render(); });
  document.getElementById('prev').addEventListener('click', ()=>{ if(page>1){ page--; render(); }});
  document.getElementById('next').addEventListener('click', ()=>{ page++; render(); });

  // fav toggle
  document.getElementById('tbl').addEventListener('click', (e)=>{
    const td = e.target.closest('.fav'); if(!td) return;
    const key = td.dataset.key; const favs = loadFavs();
    if(favs.has(key)) favs.delete(key); else favs.add(key); saveFavs(favs); render();
  });

  // export CSV
  document.getElementById('export').addEventListener('click', ()=>{
    const arr = getFiltered();
    const head = ['player','from','to','fee','contract','pos','status','date','notes'];
    const rows = [head.join(',')].concat(arr.map(r=> head.map(k=> `"${String(r[k]||'').replace(/"/g,'""')}"`).join(',')));
    const b = new Blob([rows.join('\n')], {type:'text/csv'});
    const url = URL.createObjectURL(b); const a = document.createElement('a'); a.href=url; a.download='transfers.csv'; a.click(); URL.revokeObjectURL(url);
  });

  document.getElementById('showFavs').addEventListener('click', ()=>{ showFavs = !showFavs; page = 1; render(); });

  // keyboard shortcut "/" to focus search
  window.addEventListener('keydown', (e)=>{ if(e.key === '/'){ e.preventDefault(); q.focus(); }});

  // back to top
  const back = document.getElementById('backToTop');
  window.addEventListener('scroll', ()=> back.style.display = window.scrollY>300 ? 'block':'none');
  back.addEventListener('click', ()=> window.scrollTo({top:0,behavior:'smooth'}));

  // init
  render();
  </script>
</body>
</html>
